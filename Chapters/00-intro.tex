\myChapter{Introducción}\label{chap:intro}
\minitoc\mtcskip
\vfill
\lettrine{L}{a} evolución de la Ciencia y de la Tecnología proviene de
las contribuciones de muchos investigadores a lo largo de
\graffito{Esta Tesis Doctoral involucra tanto Investigación Aplicada
  como Investigación Teórica.} % no sé qué es esto de graffito, pero
                               % si es una nota al pie no viene a
                               % cuento. - JJ
 la Historia. Los trabajos de todos estos investigadores se han
 desarrollado siguiendo principalmente dos tipos de investigaciones:
 % claro, qué van a seguir los investigadores, si no es
 % investigaciones. Dí líneas o ejes, pero vamos, que tratándose de
 % ciencia y tecnología me parece obvio - JJ 
 la investigación teórica y la aplicada. Para el desarrollo de la
 Ciencia y de la sociedad, ambas son importantes y además
 complementarias entre sí, no excluyendo la una a la otra. En esta
 Tesis en particular, se ha querido desarrollar principalmente un
 trabajo de investigación aplicada, aunque sin dejar de lado el
 aspecto teórico. Para conseguir este fin se ha partido de una primera
 motivación de tipo social % que lo haya hecho gente no quiere decir
                           % que sea social. También los problemas de
                           % ingeniería los plantea gente - JJ
 en la que un determinado colectivo plantea una problemática
 concreta. Diversos investigadores han propuesto algunas soluciones
 para resolver esta problemática, que sin embargo, presentan ciertas
 limitaciones. La búsqueda de soluciones a estas limitaciones ha sido
 la motivación técnica que ha alentado esta Tesis Doctoral. Así pues,
 esta Tesis ha pretendido dar solución a un problema
 {científico--técnico} concreto enmarcado dentro de un contexto de
 aplicación social más general.\\
% seriously, todo esto es morralla. ¿Todo esto para decir que vas a
% resolver un problema? - JJ

\clearpage
\noindent La memoria de la presente Tesis Doctoral ha sido dividida en
diferentes \textsc{Partes}, que a su vez están subdivididas en
capítulos. Esta primera \textsc{Parte} de la Tesis Doctoral sirve de
introducción del trabajo, que se expone y desarrolla en el resto de
\textsc{Partes} y capítulos y se inicia describiendo una problemática presente en la sociedad, los impedimentos que sufren los pacientes con problemas de \textsc{Baja Visión} en su vida diaria.\\
\noindent Estos pacientes que presentan una agudeza visual reducida y/o un campo de visión mucho menor del habitual sufren grandes dificultades para orientarse y en muchos casos no pueden valerse por sí mismos. Para ayudar a estos pacientes se han construido gafas y otros mecanismos \citep{dossierBajaVision,peli01,peli08}, tanto ópticos como electrónicos, que permiten ampliar su campo de visión o aumentar la definición de los objetos que observan. Sin embargo, los sistemas de tipo óptico requieren una adaptación y entrenamiento por parte de los pacientes para obtener un grado de mejora bastante limitado.
\noindent Por otra parte, con los sistemas de tipo electrónico se
obtienen mejores resultados y se consigue una elevada aceptación de
los mismos por parte de los pacientes, pero presentan varios
inconvenientes: son voluminosos y por el momento, no están diseñados
para ser utilizados fuera del ámbito doméstico o en entornos muy
controlados, principalmente la lectura de libros
\citep{dossierBajaVision} o para hacer \emph{zoom}, tanto de imágenes
de vídeo como reales \citep{clarityCompany}. Algunos científicos han
construido prototipos \citep{vargas02,ros06} que hacen uso de cámaras
digitales y algoritmos de procesamiento de imágenes para ayuda a la
navegación en pacientes con \textsc{Baja Visión}, con buenos
resultados en general. No obstante presentan algunos problemas, entre
los que destacan la detección de objetos en zonas con sombras
proyectadas o en zonas con iluminación no uniforme. La búsqueda de una
solución plausible que resuelva todos estos problemas se describe a lo
largo de la Tesis y ha sido la motivación de este trabajo. En esta
primera parte, también se explica cómo esta solución podría tener
aplicación en otros campos diferentes. Tomando como campo de
aplicación el de la ayuda a los pacientes con \textsc{Baja Visión}, se
ha acotado el marco de trabajo, lo que a su vez, ha posibilitado una
implementación concreta. % Me he perdido totalmente. ¿De esto va la
                         % tesis? ¿De quién es este fichero? - JJ

\section[Motivación]{Motivación social y problemática científico--técnica}
\lettrine{T}{eniendo} en cuenta que en esta Tesis Doctoral se exponen técnicas de procesamiento digital de imágenes para resolver problemas de visión, es conveniente realizar una breve exposición de este ámbito de trabajo e investigación. Existen muchas aplicaciones de visión artificial en la actualidad que se utilizan en diversos entornos: cámaras de control de tráfico \citep{esteve06}, sensores de presencia \citep{morellas03,valera05}, mecanismos autónomos de guía de vehículos \citep{grandchallenge}, retinas artificiales \citep{jin08}, etc. La disciplina de ``visión artificial'' es un campo de investigación interdisciplinar en constante avance en el que muchos investigadores de distintas ramas del saber se están dedicando de manera directa o indirecta a obtener nuevos métodos o a mejorar los mecanismos de procesamiento de los mismos. Estas mejoras en los resultados obtenidos permiten construir aplicaciones de mayor complejidad.\vspace{-0.75em}
\subsection[Procesamiento de imágenes]{Visión artificial y procesamiento de imágenes y vídeo}
\vspace{-0.5em}Existen multitud de esquemas de visión artificial estructurados de diferentes formas. Uno de ellos se puede describir mediante un esquema simplificado, en analogía con el funcionamiento de los compiladores. Los algoritmos de visión artificial suelen comenzar con una fase, denominada \textsc{análisis de la escena}, que suele, a su vez, estar subdividida en varias etapas consecutivas. En la primera etapa de esta fase, , se realiza un procesamiento de bajo nivel de la imagen (el equivalente al procesamiento de nivel léxico de los compiladores), gracias al cual se extraen los elementos estructurales más básicos y sencillos, que constituyen los componentes fundamentales de las imágenes captadas. Una segunda etapa de esta fase, conocida como \textsc{reconocimiento de patrones}, busca interrelaciones y agrupaciones complejas entre los diversos elementos básicos, extraídos en la etapa anterior (esta etapa equivaldría al nivel sintáctico de los compiladores). En el último nivel de análisis, que se suele denominar \textsc{detección} o \textsc{identificación de objetos}, se estudian dichas agrupaciones para extraer estructuras coherentes con significado en el mundo real, en las que se puede integrar información de modelos cognitivos (aspecto similar al nivel semántico de los compiladores). Estos modelos se han generado a partir de otras experiencias anteriores o de bases de datos bien estructuradas. Los algoritmos inteligentes de toma de decisiones que se implementan en niveles superiores utilizan los resultados obtenidos en esta fase de análisis.\\
\noindent Centrándose\graffito[-2em]{La detección de bordes de objetos es la técnica más utilizada en la etapa de extracción de características} en la primera etapa, de \textsc{extracción de características}, existen muchas técnicas que nos permiten extraer algunas propiedades fundamentales de las imágenes para poder caracterizarlas. De entre todas las técnicas existentes, las que más se suelen aplicar son las de \textsc{detección de bordes o contornos de objetos}. Existen muchas implementaciones distintas para la detección del borde de los objetos, cada una de las cuales está basada en técnicas diferentes. Cabe preguntarse por qué, de entre todos los métodos posibles, los algoritmos de detección de bordes se suelen aplicar en las primeras fases de la extracción de características: está ampliamente documentado \citep{thorpe96,thorpe00,thorpe01} que el ojo humano y las primeras etapas de procesamiento visual humano van equipadas con estructuras neuronales que extraen de forma eficiente zonas de alto contraste, que habitualmente coinciden con los bordes de los objetos. Es decir, el sistema visual humano utiliza filtros espacio--temporales para esas primeras etapas de procesamiento. De esta manera, aplicando algoritmos de extracción de bordes podemos reducir el volumen de datos que hay que procesar, puesto que todas las zonas interiores de los objetos no contienen información de bordes y se pueden descartar. Por tanto, las distintas técnicas de detección de contornos nos van a extraer de forma eficiente y rápida estas características espaciales (de alto contraste local) como zonas con mayor información, que serán utilizadas por los algoritmos de los niveles superiores. Estas técnicas también permiten eliminar muchas zonas espacialmente redundantes y con \emph{relativamente} poca información de interés para el sistema visual humano.\\
\noindent Las diferentes técnicas e implementaciones de los detectores de contornos de los objetos suelen representar el resultado final mediante un mapa binario de igual tamaño que la imagen original, en el que el valor binario de cada \definicion{pixel}{Del inglés, \emph{PI(X)cture ELement}; se suele traducir como \textsc{punto de la imagen}} de la imagen indica su pertenencia a los bordes de alguno de los objetos presentes en la escena. El referido mapa binario suele ser el refinamiento final proveniente de la umbralización de uno o más mapas previos que contienen diversas ``medidas'' (por ejemplo: magnitud del gradiente, laplaciano del gradiente, entropía, etc.). La umbralización puede ser tan simple como la comparación de cada \textsc{píxel} de la imagen con un valor único, o puede ser mucho más compleja y usar valores de umbral localmente adaptativos y ventanas de tamaño dinámico. El uso de umbrales globales acelera los cálculos a costa de tener resultados muy sensibles al ruido, mientras que el uso de umbrales más complejos provee resultados más robustos frente al ruido, aunque mucho más costosos en tiempo de procesamiento.\vspace{-0.75em}
\subsection[Iluminación no uniforme]{La problemática de la iluminación no uniforme}
Prácticamente \graffito{El problema de la iluminación no uniforme de las escenas provoca degradación de los resultados en el procesamiento de las escenas.}desde los inicios de las disciplinas de visión artificial y de procesamiento de imágenes y vídeo, diversos autores \citep{oppenheim68,oppenheim69,canny86} han informado del problema de la iluminación no uniforme de las escenas, que suele llevar a un deficiente procesamiento de los elementos presentes en las mismas. Las sombras proyectadas o los focos de luz pueden interferir en los algoritmos alterando el resultado de manera ``artificiosa''. Esta problemática se observa muy claramente en la detección de los bordes de los objetos en zonas de sombras proyectadas. En estos casos es necesario recurrir a algoritmos muy complejos o a técnicas de umbralización adaptativas, que complican el proceso de selección de los parámetros que optimizan el resultado.\\
\noindent Así pues, la iluminación no uniforme, las sombras proyectadas, los focos de luz y elementos similares que afecten a la iluminación incidente en una determinada zona de la imagen provoca, en la mayoría de los casos, la no detección en absoluto de fronteras en dichas zonas o, en el mejor de los casos, una detección muy deteriorada de las mismas. Esto suele contrastar con las fronteras detectadas en las zonas bien iluminadas, que tienen valores mucho más elevados, lo que suele provocar que los bajos valores de las fronteras de las zonas de baja iluminación se cataloguen como ``falsos positivos'' y se descarten del mapa de bordes final. Por tanto, todos aquellos mecanismos que proporcionen un resultado invariante ante los cambios de iluminación natural, proporcionarán una mayor calidad en la detección de bordes de imágenes.\vspace{-0.75em}
\subsection{La calidad en el procesamiento de imágenes}
\noindent Al contrario que en muchas de las áreas de investigación de las Ingenierías, para el \textsc{Procesamiento de Imágenes y Vídeo} en general, y para la \textsc{Visión Artificial} en particular, no se suele conocer \apriori el resultado ``perfecto''. Esto es así porque la bondad de un resultado depende en gran medida del objetivo que se persiga. \graffito{La calidad de las imágenes procesadas se evalúa de manera indirecta} Por ejemplo, para una imagen de una carretera captada por un robot de ayuda de navegación, basta con que se detecten las líneas rectas que delimitan los carriles de la carretera, aunque se pierdan todos los matices y detalles como árboles, casas, paisajes, etc.; sin embargo, para un sistema de detección de caras lo importante puede ser que detecte perfectamente los rasgos faciales, aunque no sea capaz de detectar ningún otro elemento del cuerpo. Es por ello que la medición de la calidad de las imágenes procesadas se suele hacer de manera indirecta. Para ello, se mide la bondad de la respuesta de un mismo método de niveles superiores cambiando los métodos de \textsc{Procesamiento de Imágenes y Vídeo} de los niveles inferiores. Se da por supuesto que si el mismo módulo es capaz de mejorar el resultado obtenido, es porque el método que ha extraído las características tiene un mejor comportamiento.\\
\noindent Sin embargo, existen casos en los que no es posible hacer ninguna medición indirecta.\graffito{Cuando la calidad de las imágenes procesadas no es medible indirectamente, se realizan encuestas subjetivas} Por ejemplo, cuando se prueban de manera independiente métodos de \textsc{Procesamiento de Imágenes y Vídeo} en los que \apriori no se conoce para qué se van a utilizar; bien porque aún no se dispongan de los módulos de procesamiento de niveles superiores, o bien porque el usuario final va a visualizar directamente las imágenes procesadas por estos métodos sin ningún procesamiento digital posterior. En todos estos casos, el usuario es el único ``juez'' válido para medir la calidad de las imágenes procesadas, y además, la respuesta que proporcione se basará únicamente en su opinión, ya que no podrá adjuntar ninguna medición cuantitativa. Para la obtención de la opinión de los usuarios, el mecanismo más utilizado consiste en el análisis de encuestas de opinión.\\
\noindent Existen algunos protocolos o estándares para la cumplimentación de encuestas de opinión que contengan imágenes o vídeo para su evaluación cualitativa \citep{itu-t_p800}. Sin embargo, estos estándares sólo proporcionan información de cómo se deben presentar las imágenes o los vídeos que se desean evaluar (posición del observador, iluminación de la estancia, etc.) y no presentan recomendaciones con respecto a la selección de la muestra poblacional ni a la construcción y desarrollo de las encuestas. Esto puede provocar que las encuestas estén muy sesgadas, por lo que el resultado podría no ser generalizable y, por tanto, las conclusiones obtenidas no serían válidas.
\section{Campos de aplicación}
\lettrine{C}{omo} se ha indicado previamente, la motivación principal del trabajo realizado en esta Tesis Doctoral es propiciar una aplicación real de la investigación científico--técnica que sea útil a los intereses de la sociedad. Por ello, a continuación se indican algunos campos de aplicación en los que la inclusión de las técnicas objeto de estudio en esta Tesis podrían significar un claro avance. Tras un análisis de estos campos de aplicación se ha delimitado el marco de trabajo, que ha servido para obtener dos tipos de características, las cuales acotan y determinan el trabajo de investigación: los objetivos científicos que deben cumplir los métodos diseñados y las restricciones técnicas que la tecnología actual impone en la implementación de los algoritmos desarrollados.\vspace{-0.75em}
\subsection[Sistemas de ayuda para Baja Visión]{Sistemas de ayuda para personas con patologías visuales: \textsc{Baja Visión}}
Existen muchos grados y causas por las que una persona puede sufrir algún tipo de deficiencia visual. La graduación puede ir desde una degradación de la calidad de visión en general (presbicia) o en los objetos situados a corta o a larga distancia (hipermetropía o miopía, respectivamente), hasta la ceguera total o parcial de uno o de ambos ojos, pasando por diversas deformaciones y aberraciones ópticas de los objetos (astigmatismo). Además, estos problemas pueden estar causados por defectos anatómicos o por lesiones en diferentes partes del sistema visual, como:
\begin{aenumerate}
    \item El globo ocular (principalmente, en la córnea y el cristalino).%\vspace{0.5em}
    \item El fondo del ojo (la retina).%\vspace{0.5em}
    \item El nervio óptico.%\vspace{0.5em}
    \item El \definicion{Córtex Visual}{La parte del cerebro que analiza e interpreta las imágenes.}.%\vspace{0.5em}
\end{aenumerate}
\noindent Los enfermos que sufren alguna clase de degeneración del sistema visual suelen presentar problemas, en mayor o menor medida, para poder manejarse por sí mismos, debido a que el campo visual ha sufrido una gran disminución (en algunos casos, completa o a que la percepción de los escenarios se ha empobrecido hasta tal punto que no son capaces de determinar la presencia de ningún elemento en particular.
\paragraph{Baja visión} \noindent \emph{``Se considera que una persona tiene \textsc{Baja Visión} cuando padece una limitación visual que le dificulta o impide la realización de las tareas de la vida cotidiana. La \textsc{Baja Visión} puede ser causada por distintas patologías, accidentes o malformaciones congénitas. En todos los casos, se trata de una razón crónica e irreversible, por lo que la rehabilitación de la \textsc{Baja Visión} entra en juego cuando el oftalmólogo no puede hacer nada más por mejorar la visión.''} \citep{bajavisionWEB}.\\
\noindent De manera más precisa científicamente, la \definicion{OMS}{Organización Mundial de la Salud} definió en 1992 que se considera que un paciente sufre \textsc{Baja Visión} si en el mejor ojo con la mejor corrección posible, su \emph{agudeza visual} desciende por debajo de $6/20$ (o $0.3$) en la escala de Snellen o tiene un \emph{campo visual} menor de $20^\mathrm{o}$ \citep{lowVisionOMS,dossierBajaVision}.\\
\noindent La \emph{agudeza visual} mide la capacidad para percibir la figura y la forma de los objetos así como para discriminar sus detalles. Para medirla se utilizan generalmente optotipos o paneles de letras o símbolos, para lo que habitualmente se utiliza el test de Snellen (ver \textsc{Test de Snellen} en el pie de la página \pageref{snellen}). El \emph{campo visual} se define como la capacidad para percibir los objetos situados fuera de la visión central (que corresponde al punto de visión más nítido). La valoración del campo visual se realiza a través de la campimetría.
\paragraph{Manifestaciones y Síntomas} \noindent La \textsc{Baja Visión} puede presentarse mediante distintas manifestaciones o síntomas, que se pueden agrupar en cuatro tipos:
\begin{aenumerate}
\item Pérdida de visión macular: Visión lateral.
\item Pérdida de visión lateral: Visión en túnel.
\item Pérdida de visión no localizada.
\item Pérdida de definición o de agudeza visual.
\end{aenumerate}

\paragraph{Patologías} \noindent En general, los síntomas de \textsc{Baja Visión} pueden aparecer por muchas causas: \graffito{La \textsc{retinosis pigmentaria} también es conocida como \textsc{retinitis pigmentaria} o \textsc{pigmentosa}} algunas enfermedades, malformaciones genéticas, la edad o traumatismos. Existen diferentes patologías que pueden causar \textsc{Baja Visión}, entre las que se encuentran la degeneración macular, el desprendimiento de retina, la retinosis pigmentaria, la retinopatía diabética, el glaucoma, las cataratas y la miopía magna. En la Tabla \ref{tbl:enfermedadesBajaVision} se muestran las diferentes manifestaciones de \textsc{Baja Visión} junto con sus patologías asociadas.

\begin{SCtable}[][!t]
\begin{tabular}{ll} \hline % p{0.55\textwidth}l
\rowcolor{colorCorporativoSuave} \textsc{Manifestaciones}  & \textsc{Patologías} \\
\hline \hline
\rowcolor{colorCorporativoMasSuave} Visión Lateral             &  Degeneración Macular \\
\hline
\rowcolor{colorCorporativoSuave}                            &  Glaucoma \\
\cline{2-2}
\rowcolor{colorCorporativoSuave}\multirow{-2}{*}{Visión en Túnel} &  Retinitis Pigmentaria \\
\hline
\rowcolor{colorCorporativoMasSuave}  & Desprendimiento de Retina \\
\cline{2-2}
\rowcolor{colorCorporativoMasSuave} \multirow{-2}{*}{Pérdida de visión no localizada} &  Retinopatía Diabética \\
\hline
\rowcolor{colorCorporativoSuave}   &  Cataratas \\
\cline{2-2}
\rowcolor{colorCorporativoSuave} \multirow{-2}{*}{Pérdida de agudeza visual} &  Miopía Magna \\
\multicolumn{2}{p{0.95\textwidth}}{}\vspace{-1.5em}\\
\hline
\end{tabular}\caption[Patologías y Baja Visión]{Manifestaciones de \textsc{Baja Visión} junto con sus patologías asociadas.\label{tbl:enfermedadesBajaVision}}
\end{SCtable}
\vfill
\paragraph{Incidencia} \noindent Según la \person{OMS} \citep{lowVisionOMS}, la prevalencia de la \textsc{Baja Visión} está entorno al $2-3\%$ en los países desarrollados. La presencia en Europa de pacientes con \textsc{Baja Visión} está por encima de los 20 millones, de los cuales más de 2 millones son españoles \citep{bajavisionWEB}. En cuanto a los EEUU, la incidencia de glaucoma y de retinitis pigmentaria, dos de las enfermedades que pueden provocar \definicion[-2em]{Visión en Túnel}{Pérdida de la visión lateral con visión únicamente a través de la fóvea.}, es de 2 pacientes por cada 100 adultos mayores de 40 años para el glaucoma, y de entre 20 y 33 individuos de cada 100\,000 para la retinitis pigmentaria \citep{luo04}.
\vfill
\hspace{-3em}
\label{snellen}
\begin{tabular*}{\paperwidth}{DC}
Test de Snellen & Con el test de Snellen se determina el menor tamaño de detalle que es capaz de ver un paciente. En este test se solicita al paciente que indique cuál es la letra de menor tamaño que es capaz de identificar completamente de una tabla situada a 6 metros de distancia. El tamaño de las letras se construye partiendo de un tamaño base, que ha sido obtenido previamente midiendo el tamaño mínimo de las letras que son capaces de ver los pacientes con buena visión a 6 metros de distancia. Finalmente, la medida de la \emph{agudeza visual} se indica con una fracción, donde el numerador es 6 y el denominador indica la distancia a la que un paciente con buena visión sería capaz de ver esa misma letra.\newline Así pues, la \emph{agudeza visual} de $6/6$ (o $1,0$) es el valor base en la que un paciente es capaz de ver perfectamente las letras de tamaño base a 6 metros de distancia. Por otra parte, si a 6 metros de distancia un paciente sólo puede ver las letras de mayor tamaño, la medida de \emph{agudeza visual} es de $6/60$ (o $0,1$); esto es equivalente a decir que un paciente con buena visión sería capaz de ver ese tamaño de letra a $60$ m. de distancia.
\end{tabular*}
\clearpage
\paragraph{Actuación y Rehabilitación} \noindent Los pacientes con \textsc{Baja Visión} no pueden recuperar visión, es decir, que cuando ya se han agotado todas las posibilidades quirúrgicas, oftalmológicas y ópticas posibles, la única opción posible es una rehabilitación que les permita sobrellevar su enfermedad y mejorar su calidad de vida. Para esta rehabilitación se utilizan técnicas visuales que les permiten aprovechar al máximo el remanente visual que les queda. También se hace uso de elementos ópticos de aumento y de aparatos electrónicos de ayuda a la visión, sobre todo para la lectura.
\paragraph{Aplicación Científico--Técnica} \noindent En general todos los pacientes con \textsc{Baja Visión} tienen graves dificultades para su propio manejo autónomo, por lo que la Comisión Europea, a través del $7^o$ Programa Marco \citep{VIIProgramaMarco}, ha impulsado el desarrollo de sistemas de apoyo para este colectivo. En particular, los pacientes que sufren de \emph{visión en túnel} presentan algunas características que permiten el desarrollo de aplicaciones para la mejora de su propia autonomía. Al perder la visión lateral, carecen de todas las referencias espaciales del entorno, por lo que sólo son capaces de identificar aquello que está justo enfrente de ellos, ya que es precisamente esta zona la que está cubierta por la fóvea.\\
\noindent Al ser dicha zona la de mayor sensibilidad y agudeza visual del ojo, existen estudios  \citep{vargas02,luo04} en los que se proyecta en ella una imagen reducida de un campo visual mayor, de tal forma que el individuo con \textsc{Baja Visión} puede ver una miniatura de la escena que le rodea. Para que el paciente pueda observar también la imagen real que se le presenta de manera natural en su fóvea, la imagen del entorno en miniatura se presenta mediante un esbozo de bordes. Hay estudios \citep{apfelbaum05,neisser75,mack98} que han demostrado que el sistema visual humano es capaz de ignorar y acomodar la vista casi a la perfección ante la presencia de elementos no completamente opacos situados a diferentes niveles de profundidad. A este efecto se le denomina \emph{ceguera no atencional}. Gracias a la cual, el paciente es capaz de ignorar la miniatura si lo que desea es observar la imagen natural captada por su fóvea, desenfocando dicha imagen en miniatura, y viceversa. Se puede observar dicho comportamiento ante manchas en un cristal: es posible enfocar la mancha presente en el cristal e ignorar la imagen real del fondo, o bien enfocar la imagen que hay en el fondo tras el cristal, ignorando la mancha.\\
\noindent En este campo de aplicación, un procesamiento eficaz de la escena, en el que se puedan eliminar las sombras y los efectos causados por una iluminación no uniforme de la imagen, permitiría mostrar imágenes de bordes en miniatura con mayor utilidad para los pacientes que las actuales, en las que las zonas en sombra no suelen estar bien representadas. También permitiría la utilización de técnicas más complejas de inteligencia artificial, que adapten las miniaturas a las necesidades del paciente en cada momento. Por ejemplo, el sistema debería ajustar su comportamiento según el usuario esté andando por la calle o leyendo: en el primer caso se requiere menos precisión y más rapidez, mientras que en el segundo, el requisito fundamental es la precisión, siendo la rapidez de respuesta menos importante.
\subsection[Sistemas inteligentes de Realidad Aumentada]{Sistemas inteligentes de Realidad Aumentada: Beyond Human Capabilities}
El término \emph{Realidad Virtual} \graffito{La Realidad Aumentada mezcla imágenes reales con otras generadas artificialmente.} fue acuñado por \person{Lanier} \citep{lanierURL} a principios de la década de 1980 para definir la generación de gráficos utilizados para crear escenas virtuales. En contraposición, la \textsc{Realidad Aumentada} mezcla imágenes reales con gráficos y/o información textual, ambos generados por una computadora. Hay que indicar que la información generada se obtiene a partir de las imágenes reales captadas por el sistema, es decir, que los gráficos añadidos no son independientes de las imágenes captadas, sino que se produce una inmersión de estos en las imágenes reales.\vspace{-0.5em}
\paragraph{\'{A}mbito de defensa} \noindent Los primeros sistemas de \textsc{Realidad Aumentada} vinieron de la inversión en investigación y desarrollo de los ejércitos y ministerios de defensa de diferentes países. Uno de los primeros fue el sistema de ayuda de navegación aeronáutica de los pilotos de combate \citep{rash01,rash08}, en el que los pilotos llevan un casco con un visor transparente en el que se proyectan datos de pilotaje (compás, altímetro, velocímetro, etc.), de tal manera que no tienen que retirar la vista del frente para obtener dicha información. Por otro lado, actualmente están tomando mucha importancia los sistemas de exploración, soporte táctico y de ayuda balística para infantería. Ministerios de Defensa de distintos países están apoyando la investigación y el desarrollo de estos sistemas, junto con armas más seguras y equipamiento que proporciona un mayor grado de defensa al combatiente, analizados y desarrollados en el proyecto ``\emph{combatiente del futuro}'' \citep{fam05}.\\
\noindent La \textsc{Realidad Aumentada} en defensa se utiliza para proporcionar información extra y mayor seguridad a los soldados en combate. Por ejemplo, dotando a los combatientes de sistemas que permitan el disparo desde posiciones ocultas, es decir, sin exponer al soldado a la visión directa del blanco. Otra funcionalidad deseada es la de proporcionar información táctica (sobreimpresión de imágenes de emisión de calor, distancia al blanco, posición de otros miembros del equipo de ataque, posibilidad de visualización de planos de servicio, topográficos, etc.). Para ello, las imágenes reales son captadas por cámaras de alta sensibilidad y otros sensores (que habitualmente están montados sobre el fusil de asalto o sobre el casco del soldado) y, tras realizar un procesamiento computacional de dichas imágenes, los resultados son presentados al soldado mediante gafas con microproyectores o de cristal líquido.
\paragraph{\'{A}mbito médico} \noindent En las intervenciones quirúrgicas hay una tendencia a realizar el mínimo número de incisiones externas y del menor tamaño posible. Para realizar la cirugía interna necesaria, se introducen por algunas de las incisiones unas pequeñas pinzas que permiten manipular los tejidos, vasos sanguíneos, etc., que estén involucrados en la operación. Como las operaciones quirúrgicas involucran la consulta de muchos datos sobre el estado del paciente, además del conocimiento médico para ser capaz de identificar los puntos de actuación, junto con los órganos, vasos sanguíneos, músculos y demás elementos implicados en la operación, la consulta de los datos puede implicar retirarse de la zona de operación, lo que puede provocar que se deje de observar algún punto interior del paciente.
\noindent Para solucionar este problema, actualmente también se realizan otras incisiones por las que se introducen unas microcámaras que permiten al cirujano observar el interior del paciente. Los cirujanos y el resto de personal sanitario observan las imágenes captadas por las microcámaras a través de monitores de visualización presentes en el quirófano. De esta forma, al ver la operación a través de un monitor, hay facilidad de incluir en la imagen mostrada por pantalla los datos relevantes sobre el paciente. En estas operaciones, también existe la posibilidad de marcar digitalmente elementos del paciente y que un ordenador realice el seguimiento de los mismos, para informar de anomalías a lo largo de la operación, pudiendo el cirujano centrarse prioritariamente en otros aspectos de la cirugía.\\
\noindent También dentro del ámbito médico, el procesamiento de imágenes médicas permite la reconstrucción \threed de tomografías, ecografías y demás sistemas de exploración no invasiva. La inclusión de esta información, previamente obtenida, en el momento de las operaciones permite a los cirujanos tener ayudas visuales virtuales del campo quirúrgico. En algunos casos, incluso se permite hacer rotaciones y cambiar el punto de vista, simulando cómo se vería el elemento que se está operando desde otra posición.
\paragraph{\'{A}mbito cultural} \noindent Se pueden visitar los museos de diferentes maneras: simplemente observando los objetos expuestos, leyendo sus etiquetas explicativas, con un libro--guía que nos cuente todos los detalles, con un guía que además de explicarnos todos los datos de interés también atienda todas nuestras dudas, etc. Sin embargo, seguramente es preferible que los autores de los objetos o los protagonistas de las escenas que se están observando sean los que expliquen todas esas interioridades. En la mayoría de los casos eso no es posible, bien porque el autor o los protagonistas han fallecido, o porque simplemente el autor no puede estar siempre en dicho lugar para atender a los visitantes. En \citep{bolter07} se muestra cómo, mediante un sistema de \textsc{Realidad Aumentada}, se integran actores--guía en el cementerio histórico de Oakland, en Atlanta, que simulan ser ``fantasmas''  de la guerra civil americana. Estos ``fantasmas'' virtuales comentan el escenario real donde vivieron, explicando los acontecimientos que sucedieron durante su vida, etc. Para que ``aparezcan estos fantasmas'' durante la visita libre a dicho cementerio, los visitantes llevan un sistema de gafas que contiene un microproyector y unos auriculares incorporados, además de un GPS diferencial, un sistema de control inercial y sistemas de captura óptica. Mediante estos sistemas se determina la posición del visitante y se le proyecta una grabación personalizada y adaptada a lo que esté viendo (teniendo en cuenta características del terreno, etc.), de manera que sea plausible y coherente no sólo lo que explique el ``fantasma'', sino su posicionamiento y su movimiento.\\
\noindent El enfoque anterior, aunque  da muy buenos resultados en ambientes controlados, no es aplicable en todos los casos. Por ejemplo, las visitas guiadas de recintos o incluso de ciudades o países tienden a ser muy restrictivas y poco flexibles, presentando una serie de puntos en los que se describen algunos conceptos clave y dejando al usuario la misión de localizar los sitios de interés descritos. Los teléfonos actuales, permiten solucionar este problema, gracias a que incluyen una multitud de sensores (cámara, GPS, giróscopos, acelerómetros, brújulas, etc.) y procesadores de relativamente alta capacidad de cómputo. Ejemplos de este tipo son las aplicaciones \emph{Layar Reality Browser} \citep{layarWeb} o \emph{Wikitude} \citep{wikitudeWeb}. Éstas, utilizando la cámara del teléfono como entrada de imágenes y la señal del GPS integrado junto con la brújula para seguir la localización del usuario, permiten procesar dichas imágenes, y señalar e identificar en ellas mediante etiquetas los diferentes monumentos, edificios singulares u otros aspectos de interés para el usuario, que se muestran en la pantalla del teléfono según se les va enfocando con la cámara integrada.
\paragraph{\'{A}mbito deportivo y televisivo} \noindent En las retransmisiones deportivas, los espectadores desean tener muchos datos sobre el juego que están viendo. Así, las televisiones proporcionan información visual sobreimpresionada sobre las imágenes reales en las que, dependiendo del deporte, se muestran distancias, estadísticas de jugadores o líneas dinámicas del juego (como pueden ser líneas de fuera de juego, líneas de pase, líneas de ``primer \emph{down}'', zonas libres de marcaje, líneas de ataque, estructuras defensivas, etc.). También se suele incluir publicidad sobreimpresionada como si estuviese pintada sobre el propio campo de juego. Todos estos datos se muestran sin que la presencia de los mismos oculten la jugada. Para ello, las televisiones calibran sus cámaras de manera que antes de la retransmisión deportiva ya conocen las proporciones del terreno de juego, y consecuentemente tienen una representación tridimensional en la que pueden adaptar todos los gráficos al perfil real. Además, para que los cálculos parezcan inmediatos, se retrasa la señal de vídeo en unas decenas de fotogramas, lo que permite alterar dichos fotogramas añadiendo elementos gráficos generados por ordenador.\\
\noindent Por otro lado, para los entrenadores y analistas deportivos el uso del vídeo tiene mucha importancia, ya que con él pueden revisar las actuaciones propias, detectando errores, acciones de mayor efectividad, etc. También les permite estudiar a los equipos contrarios, tanto en ataque como en defensa, repasar acciones especiales, movimientos tácticos de jugadores en particular, etc. En este contexto, los sistemas informáticos permiten la automatización de algunas tareas, como por ejemplo, el seguimiento de un determinado jugador o del balón, y gracias a estos seguimientos automatizados, el ordenador puede trazar la ruta que han seguido los jugadores y facilitar su estudio.
\paragraph{\'{A}mbito lúdico--recreativo} \noindent Las estimaciones indican que en el año 2011, el negocio de los videojuegos moverá al año unos 48.900 millones de dólares (más de 37.300 millones de euros) en todo el mundo \cite{szalai07}. Este volumen económico tan elevado, hace que esta industría sea una de las más pujantes dentro del ámbito de la informática, con grandes avances año tras año para mantenerse en la cresta de la ola de las demandas de los usuarios. En los videojuegos actuales, existe una demanda de gráficos hiperrealísticos y con controles de movimiento lo más naturales posibles. Esto se ha conseguido gracias al uso de tecnologías de \textsc{realidad aumentada} en las videoconsolas utilizando cámaras y mandos con diferentes sensores, tales como acelerómetros, giróscopos, etc. Este proceso se generalizó en el 2003 con la introducción del sistema Eye Toy en la Sony PlayStation 2, aunque ya antes otros sistemas habían propuesto mecanismos parecidos para la generación de sistemas de \textsc{realidad aumentada}. En este tipo de videojuegos, se captan imágenes reales del usuario y su entorno mediante cámaras incluidas en las diferentes plataformas de juego, que son incluidas dinámicamente en el videojuego para proporcionar más realismo, de forma que el propio usuario es el que determina la respuesta del juego con los movimientos de su cuerpo. La generalización de las videoconsolas portátiles con cámaras, PSP y Nintendo DSi, ha permitido la integración de escenarios reales en los juegos, consiguiendo imbuir a los usuarios en juegos que transcurren en su entorno real. El videojuego \emph{Invizimals}, publicado durante el año 2009, es un claro ejemplo de las posibilidades lúdicas de la \textsc{realidad aumentada}. En este videojuego desarrollado para la consola portátil PSP, el jugador debe atrapar unos ``monstruos'' virtuales, sólo visibles utilizando la cámara de dicha videoconsola. Además, se utilizan unas trampas (unos dispositivos físicos con forma cuadrada) que se colocan físicamente en las diferentes habitaciones y el jugador debe conseguir que los \emph{Invizimals} caigan en dichas trampas.
\section{Marco de trabajo}
\lettrine{T}{ras} plantear la motivación y unos posibles campos de aplicación de esta Tesis, a continuación se acota el marco de trabajo en el que se ha desarrollado la investigación. Las restricciones propuestas con respecto al tiempo de procesamiento han determinado la solución escogida. Por otra parte, el grado de calidad de la respuesta esperada también ha influido decisivamente en los métodos y en los parámetros de funcionamiento seleccionados.
\subsection[Calidad de las imágenes procesadas]{Esquemas de evaluación de los resultados del procesamiento de imágenes}
El principal aspecto que ha condicionado el desarrollo de esta Tesis Doctoral ha sido el de la búsqueda del método que proporcione una mejor calidad en su respuesta visual. Como se ha enunciado brevemente con anterioridad, y como se describirá más adelante, la evaluación de la calidad del resultado de las imágenes procesadas, en la mayoría de los casos, es una cuestión subjetiva. Esta característica ha marcado en gran medida las diversas decisiones que se han ido tomando, tanto en la investigación como en el desarrollo de las técnicas y de las herramientas propuestas en esta memoria.
\subsection[Imágenes en Tiempo Real]{Procesamiento de imágenes en tiempo real}
Una aplicación de procesamiento de imágenes en tiempo real debería ser capaz de capturar las escenas y procesarlas con una tasa de entre 25 y 30 fotogramas por segundo y con un retardo menor de 1 fotograma; es decir, se debería procesar un nuevo fotograma cada 33 o 40 milisegundos, según la tasa de captura. Con esta frecuencia de procesamiento, el resultado se vería continuo, suave, y se presentaría coherente con la visión real. Sin embargo, el trabajo que se presenta en esta Tesis es una primera aproximación a la solución, por lo que no se ha impuesto como requisito imprescindible la velocidad de procesamiento, aunque sí se ha tenido en cuenta para el desarrollo de los algoritmos asociados a los métodos propuestos, seleccionando aquellas implementaciones de menor complejidad computacional.
%\clearpage
\section[Planteamiento]{Planteamiento inicial}
\lettrine{T}{eniendo} en cuenta todos los requisitos, factores implicados y restricciones expuestos en las secciones anteriores, a continuación se expone el planteamiento inicial del trabajo de la presente Tesis Doctoral. Esta sección, que sirve como resumen de lo expuesto, y muestra las primeras decisiones de diseño de entre las opciones anteriormente descritas, se ha usado como punto de inicio de la investigación.
\subsection{Problemática}
La problemática que se desea resolver es la siguiente:\\[1em]
\begin{tabular}{|A|}
\hline
En general, los sistemas de visión artificial basados en la extracción de bordes son muy sensibles ante los cambios locales de iluminación en las escenas: Presentan baja capacidad de detección de bordes en las zonas en sombra de las escenas.\vspace{1em}\\
\hline
\end{tabular}\\
\subsection{\'{A}mbito de actuación}
De todos los posibles ámbitos de actuación descritos con anterioridad, este trabajo se centra en:\\[1em]
\begin{tabular}{|A|}
\hline
El soporte visual para los pacientes con \textsc{Baja Visión}, en especial, para aquellos con sintomatología de \textsc{Visión en Túnel}.\vspace{1em}\\
\hline
\end{tabular}\\
\subsection{Objetivos científicos de la Tesis}\label{sec:objetivos}
La presente Tesis Doctoral presenta varios objetivos que se pueden dividir entre objetivos primarios y objetivos secundarios. Los objetivos primarios son los que han marcado las directrices generales de la investigación y pretenden dar respuesta a las preguntas: ``\emph{?`Qué debe realizar el sistema?}'' y ``\emph{?`Cómo de buenos son los resultados que proporciona?}'' Por otra parte, los objetivos secundarios son aquellos que se desea que cumpla el sistema de manera adicional a los primarios. Con estos objetivos se pretende matizar la respuesta de ``\emph{?`Cómo deben realizarse las acciones del sistema?''}
%\clearpage
\paragraph{Objetivos Primarios} \noindent \\
\noindent Como \textsc{Objetivos Primarios} se desea:\\[1em]
\begin{tabular}{|A|}
\hline
\vspace{-0.75em}\begin{aenumerate}
\item Desarrollar un método eficiente y robusto para obtener un esbozado de escenas reales con sombras.
\item Obtener una evaluación de la calidad de las imágenes procesadas, obtenidas con diferentes métodos.
\end{aenumerate}\\
\hline
\end{tabular}\\
\paragraph{Objetivos Secundarios} \noindent \\
\noindent También se desea alcanzar los siguientes \textsc{Objetivos Secundarios}:\\[1em]
\begin{tabular}{|B|}
\hline
\vspace{-0.75em}\begin{aenumerate}
\item Obtener imágenes procesadas con buena calidad subjetiva para pacientes con \textsc{Baja Visión}. \label{obj:colateralBajaVision}
\item Optimizar el algoritmo de procesamiento para alcanzar una velocidad adecuada a la aplicación propuesta. \label{obj:colateralVelocidad}
\item Generar un mecanismo para la evaluación subjetiva de imágenes procesadas mediante encuestas de opinión.\label{obj:colateralEncuestas}
\end{aenumerate}\\
\hline
\end{tabular}\\
\subsection{Propuesta inicial}
A partir de los \textsc{Objetivos Principales} se ha determinado qué herramientas y métodos se deben desarrollar. Para conseguir dichos objetivos ha sido necesario investigar y desarrollar un método de extracción de características que tenga un comportamiento invariante ante cambios de iluminación, así como  la construcción de un sistema Web para la evaluación de la calidad de las imágenes procesadas mediante encuestas, aspecto que se ha considerado de interés para el cumplimiento del \textsc{Objetivo Secundario} \ref{obj:colateralEncuestas}.
\clearpage
\subsubsection{Método para la extracción invariante de características ante cambios de iluminación}
Se conoce que el paradigma \definicion{LIP}{Del inglés, \textsc{Logarithmic Image Processing}. Ver Cap. \ref{sec:introLIP}} permite extraer bordes de manera invariante ante cambios de iluminación mediante una modificación del método de \emph{Sobel} \citep{deng98}, aunque esta aproximación presenta problemas de generalización a otros métodos de extracción de bordes más complejos. Sin embargo, la principal ventaja que presenta es que la extracción de bordes se realiza de manera simultánea al mecanismo que lo hace invariante ante los cambios de iluminación, frente a otras estrategias que realizan esto en varias etapas, aumentando el tiempo de computación y reduciendo, por tanto, la velocidad de proceso. Así pues, se ha decidido investigar este paradigma para conseguir un mecanismo generalizable que permita aplicar otros mecanismos de extracción de bordes con la mínima dificultad de adaptación de los mismos.
\subsubsection{Sistema Web para la evaluación subjetiva de imágenes mediante encuestas}
Dada la complejidad que supone reunir a suficientes pacientes con \textsc{\mbox{Baja} Visión} en un mismo lugar y un mismo día para que puedan contestar las encuestas de opinión, se ha pensado que Internet puede proporcionar un medio ideal para resolver esta problemática, ya que permite que los pacientes puedan acceder al cuestionario remotamente sin que se tengan que desplazarse a un lugar concreto para rellenarlo. Añadiendo sistemas de almacenamiento (como bases de datos) en el servidor se permitiría que los pacientes accediesen en cualquier momento, e incluso se permitiría a un paciente continuar una encuesta no terminada completamente. Esto último puede ser muy habitual, debido al cansancio visual que el esfuerzo de rellenar una encuesta puede provocar en este tipo de pacientes.
\section{Estructura de la Tesis}
\lettrine{E}{sta} Tesis Doctoral se ha estructurado en cinco partes, que a su vez se han dividido en capítulos, y estos en secciones y subsecciones. La composición de las diferentes partes es la siguiente:
\paragraph{Introducción} \noindent En esta Parte \textsc{I} se expone la problemática que esta Tesis pretende resolver. También se plantean, desde un punto de vista científico, las posibilidades que la ciencia y la tecnología actual ofrecen al desarrollo de sistemas que resuelvan la problemática expuesta. Se incluyen ejemplos de distintos ámbitos de actuación en los que esta problemática está presente. Para finalizar el primer capítulo, se fijan los \textsc{objetivos} y una primera aproximación a la solución. Se continúa con una revisión de técnicas de procesamiento de imágenes, exponiendo diversos métodos de extracción de contornos. También se expone el paradigma \textsc{LIP} con todos sus operadores, rangos de funcionamiento, leyes, etc. Tras lo cual, se describen los mecanismos de evaluación de contornos existentes en el ámbito científico, tanto de tipo objetivo como subjetivo. En el siguiente capítulo se tratan en profundidad las encuestas, describiendo los diferentes tipos que existen, las limitaciones que éstas presentan, el diseño genérico de los cuestionarios, los errores y sesgos más habituales y, finalmente, los métodos de validación de las mismas. Esta primera parte finaliza con una revisión de los cuestionarios para evaluación de los pacientes con \textsc{Baja Visión}, en la que se analizan los dominios comunes más relevantes.
\paragraph{Métodos y Materiales} \noindent La Parte \textsc{II} de la Tesis Doctoral consta de tres capítulos. En el primero de ellos, se presenta el nuevo operador \emph{Convolución--LIP} con dos implementaciones diferentes, una de las cuales es una optimización que tiene en cuenta la eficiencia computacional de las operaciones involucradas. En el siguiente capítulo de esta Parte, se expone la \textsc{hipótesis de trabajo} y se fijan los objetivos funcionales que se desean evaluar a través de encuestas de opinión y los métodos de extracción de contornos que se van a evaluar. Esto llevará a determinar los \textsc{Dominios} de trabajo de las mismas y las \emph{tareas de visión} asociadas a las preguntas de los cuestionarios. Se finaliza dicho capítulo con una selección de imágenes de cada uno de los \textsc{Dominios}, con los que se obtendrán los diferentes mapas de contornos para cada algoritmo seleccionado, que serán evaluados a través de encuestas. El tercer y último capítulo de esta Parte de la Tesis incluye un compendio de recomendaciones para el desarrollo de cuestionarios para la evaluación subjetiva de la calidad del procesamiento de contenidos visuales. Este capítulo concluye con una implementación de un sistema Web que proporciona el soporte para el diseño y la respuesta de encuestas de evaluación de calidad de contenidos multimedia.
\paragraph{Resultados Experimentales} \noindent Esta tercera parte confirma el cumplimiento de la \textsc{hipótesis de trabajo} a través de experimentos y encuestas de investigación. En el primero de los dos capítulos que componen dicha Parte \textsc{III}, se muestra el funcionamiento del nuevo operador \emph{Convolución--\textsc{LIP}} con diferentes algoritmos de \emph{extracción de contornos} y de \emph{emborronamiento de imagen}. Se comparan los diferentes algoritmos en las diferentes implementaciones  dentro del paradigma \textsc{LIP} y, en algunos casos, también se comparan con los métodos \textsc{No LIP} de los algoritmos evaluados, para mostrar la supremacía de la propuesta frente a las otras versiones. Estas comparaciones se realizan a nivel visual, aunque también se incluyen experimentos que evalúan el tiempo de cómputo y la ganancia de rendimiento relativo entre ellos. En el siguiente capítulo, se muestra el proceso completo de la evaluación mediante cuestionarios de opinión de los algoritmos que se seleccionaron en la Parte \textsc{II}. En dicho capítulo, se muestran los resultados obtenidos a partir de las respuestas de los usuarios con un grado de \textsc{Visión Estándar} y los que presentan problemas de \textsc{Baja Visión} para cada algoritmo evaluado. Además de estos resultados finales, se muestra cómo se han obtenido los cuestionarios, la población que ha respondido la encuesta, etc.
\paragraph{Discusión y Conclusiones} \noindent Esta parte está compuesta por dos capítulos, en los que se exponen las discusiones de los resultados finales, las conclusiones y las principales aportaciones científicas que proporciona esta Tesis Doctoral. También, se indican posibles vías de investigación futura.
\paragraph{Bibliografía y Anexos} \noindent Se incluyen todas las referencias utilizadas a lo largo de la Tesis. Finalmente, se añaden una serie de anexos sobre demostraciones matemáticas de algunos operadores del paradigma \textsc{LIP} y se incluyen las preguntas e imágenes que se han usado en los cuestionarios de evaluación utilizados en esta investigación.